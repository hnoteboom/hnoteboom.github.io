{
  "hash": "b4f98c6f77b406bdfc5c962d92695b34",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Project_5\"\nformat: html\nexecute:\n  echo: true\n  warning: false\n  freeze: true \n\nauthor: Harper Noteboom\npublished: 2025/03/05\n---\n\n\n\n\n## SQL Data Analysis\n\nFor this analysis I decided to look at a few different questions. First, I wanted to see if the number of police stops labeled as Vehicular in the state of California were changing over time. I was also interested to see if the rate of stops that resulted in arrests was also changing. I next wanted to see if there was any difference in the number of stops depending on the day of the month, I picked to look at data from San Francisco as it had data that spanned almost 10 years. Lastly, I wanted to see the racial breakdown of stops in Florida to see if there were differences in the rates of stops for different races. All of the data used in this analysis comes from the Stanford Open Policing Project.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(DBI)\nlibrary(scales)\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.sql .cell-code}\n\nSELECT \n  YEAR(date) AS year, \n  MIN(date) as start_date, \n  MAX(date) as end_date\nFROM ca_statewide_2023_01_26\nGROUP BY year\n\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 8 records\n\n|year |start_date |end_date   |\n|:----|:----------|:----------|\n|2009 |2009-07-01 |2009-12-30 |\n|2010 |2010-01-01 |2010-12-31 |\n|2011 |2011-01-01 |2011-12-31 |\n|2012 |2012-01-01 |2012-12-31 |\n|2013 |2013-01-01 |2013-12-31 |\n|2014 |2014-01-01 |2014-12-31 |\n|2015 |2015-01-01 |2015-12-31 |\n|2016 |2016-01-01 |2016-06-30 |\n\n</div>\n:::\n\n\n\n\nI used the table above to see the dates that the data spanned. Since the start date for 2009 was halfway through the year and the end date for 2016 was also halfway through the year, I decided to leave these years out of my data analysis.\n\n\n\n\n::: {.cell output.var='arrests_ca_statewide'}\n\n```{.sql .cell-code}\nSELECT \n  YEAR(date) AS year, \n  COUNT(*) AS count, \n  AVG(arrest_made) as arrested\nFROM ca_statewide_2023_01_26\nWHERE type = \"vehicular\"\nGROUP BY year\nHAVING \n  year != 2009 AND year != 2016\nORDER BY year DESC\n\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\narrests_ca_statewide\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  year   count   arrested\n1 2015 4037737 0.03658444\n2 2014 4149966 0.03673524\n3 2013 4428744 0.03639640\n4 2012 4602338 0.03838172\n5 2011 5061034 0.03699215\n6 2010 5075533 0.03781909\n```\n\n\n:::\n:::\n\n\n\n\nThe table above shows the number of vehicular traffic stops in the state of California for the years between 2010 and 2015. The arrested column represents the percentage of vehicular stops that resulted in arrest. There is consistently around 3% of stops resulting in arrests.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\narrests_ca_statewide <- arrests_ca_statewide |> \n  mutate(year = as.character(year), count = as.numeric(count)) \n\nggplot(arrests_ca_statewide, aes(x = year, y = count, fill = year)) + \n  geom_col()+ \n  scale_y_continuous(\n    labels = label_number(scale = 1e-6, suffix = \"M\", accuracy = 0.1)\n  ) +\n  labs(\n    x = \"Year\", \n    y = \"Count in millions\", \n    title = \"Number of Vehicular Stops in California\"\n  )\n```\n\n::: {.cell-output-display}\n![](Project_5_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\nThe graph above shows the number of police stops recorded as vehicular in the state of California across the years from 2010 to 2015. The graph shows a steady decline in the number of stops each year from 2011 to 2015, with stops decreasing from around 5 million in 2011 to 4 million in 2015. This graph combined with the table above shows that while the number of stops is decreasing, the proportion of stops that result in arrest remains relatively the same, around 3%.\n\n\n\n\n::: {.cell output.var='date_count_sf'}\n\n```{.sql .cell-code}\nSELECT DAY(date) AS day, COUNT(*) AS count\nFROM ca_san_francisco_2020_04_01\nWHERE type = \"vehicular\"\nGROUP BY day\nLIMIT 0, 31;\n\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndate_count_sf |> \n  mutate(count = as.numeric(count))|> \n  ggplot(aes(x = day, y = count))+ \n  geom_col() +\n  labs(\n    x = \"Day of the month\", \n    y = \"Number of stops\", \n    title = \"Number of Police Stops on Different Days of the Month in San Fransisco\"\n  )\n```\n\n::: {.cell-output-display}\n![](Project_5_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\nThe graph above shows police stops for different days of the month in San Francisco. The data spans all stops from 2007 to 2016. There is a common myth that you are more likely to be pulled over toward the end of the month because police departments need to meet a monthly quota. This data shows no real difference in stop rates between different days of the month. There is some variation among the days which is to be expected. The last days of the month, the 29th, 30th and 31st have the lowest rates with the 31st having significantly less than any other day. This is because not every month has 31 days (or even 29 in the case of February), so naturally there will be less stops on those days of the month.\n\n\n\n\n::: {.cell}\n\n```{.sql .cell-code}\n\nSELECT \n  subject_race, \n  COUNT(*) AS count, \n  COUNT(*) * 100.0 / (SELECT COUNT(*) FROM fl_statewide_2020_04_01 WHERE subject_race IS NOT NULL) AS percent\nFROM fl_statewide_2020_04_01 \nGROUP BY subject_race\nHAVING subject_race IS NOT NULL \n\n```\n\n\n<div class=\"knitsql-table\">\n\n\nTable: 6 records\n\n|subject_race           |   count|  percent|\n|:----------------------|-------:|--------:|\n|asian/pacific islander |   93421|  1.28049|\n|black                  | 1409006| 19.31276|\n|hispanic               | 1502816| 20.59859|\n|other                  |  201920|  2.76765|\n|unknown                |     250|  0.00343|\n|white                  | 4088311| 56.03708|\n\n</div>\n:::\n\n\n\n\nThe table above shows the race of individuals involved in police stops in Florida from 2010 to 2018. Over 56% of all subjects were white, and around 20% were hispanic and black. No real conclusions can be drawn from this data for multiple reasons. Officers often cannot ask people their race but must report it leading to officers making assumptions about subjects race. Biracial people might be inaccurately represented in the data and without knowing the racial make up of Florida, it is impossible to make any general claims about whether these rates are proportional to overall population or not.\n\n## Conclusion \n\nIn conclusion, data from the Stanford Open Policing Project shows that between 2011 and 2015 the number of police stops consistently decreased in the state of California but the arrest rate remained the same. According to data from San Francisco there is no significant difference in police stops on different days of the month. And the majority of people stopped in Florida between 2010 and 2018 were reported to be white. \n\n\n## References \nPierson, Emma, Camelia Simoiu, Jan Overgoor, Sam Corbett-Davies, Daniel Jenson, Amy Shoemaker, Vignesh Ramachandran, et al. 2020. “A Large-Scale Analysis of Racial Disparities in Police Stops Across the United States.” Nature Human Behaviour, 1–10.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndbDisconnect(con_traffic)\n```\n:::\n",
    "supporting": [
      "Project_5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}